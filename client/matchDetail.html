<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title></title>
    <script src="http://code.jquery.com/jquery-3.2.1.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.13/semantic.min.css" async/>
  </head>
  <body>
    <input id="query" type="text" name="query" placeholder="cari disini">
    <button id="search" type="button" name="button">search</button>

    <div id="listVideo" class="ui cards">

    </div>
  <script>
    $(document).ready(function() {
      let embed = function(video) {
        return `
          <div class="card">
            <div class="image" >
            <iframe width="100%"
            src="https://www.youtube.com/embed/${video.id}"
            frameborder="0"
            gesture="media" allow="encrypted-media"
            allowfullscreen></iframe>
            </div>
            <div class="content">
                <div class="header">${video.title}</div>
              </div>
            </div>
          `;
      };

  $('#search').click(function() {
    var query = $('#query').val();
    $.ajax({
      url: `http://localhost:8000/api/youtube/search?limit=5&q=${query}`,
      type: 'GET',
      success: function(rows) {
        console.log(rows);
        rows.data.forEach(video => {
          $('#listVideo').append(`${embed(video)}`);
        });
      }
    });
  });
});
</script>
  </body>
</html>
